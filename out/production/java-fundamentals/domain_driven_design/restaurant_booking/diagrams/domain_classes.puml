@startuml


together {
  class Menu
  entity Dish
  enum DishType
}

together {
  abstract BookingRecorder
  entity Booking
  class BookingDate
  abstract Bill
  entity BillItem
}

entity Dish {
  UUID id
  String name
  String description
  Price price
  DishType type
}

class  Price #grey {
  Decimal amount
  String currency
}

entity PayingGuest {
  UUID id
  String name
  Phonenumber phoneNumber
}

Menu -> Dish
Dish -> DishType
Dish -> Price

BookingRecorder -> Booking
Booking -down-> Bill
Booking -> BookingDate


Bill -> BillItem
Menu -[hidden]-> BookingRecorder
BookingRecorder -[hidden]-> Bill

Booking -> PayingGuest

entity Booking {
  UUID id
  PayingGuest guest
  BookingDate bookingDate
  Integer numberOfGuests
  Optional<Bill> bill
  + addBill(Bill bill)
  + Bill getBill()
}



class BookingDate #grey {
  LocalDate date
  LocalTime time
}

entity BillItem {
  UUID id
  UUID dishId
  Integer quantity
}

enum DishType {
  APPETIZER,
  MAIN_COURSE,
  DESSERT,
  BEVERAGE
}

abstract Menu {
  List<UUID> dishes
  DishDB dishDb
  + void addDish(Dish dish)
  + List<UUID> getDishIds()
  + Dish getDish(UUID id)
}

abstract Bill {
  UUID id
  Map<UUID,Bill> billItems
  + addBillItem(BillItem billItem)
  + List<UUID> getBillIds()
  + Bill getBill(UUID id)
}



abstract BookingRecorder{
  List<UUID> bookings
  BookingsDB bookingsDb
  + void addBooking(Booking booking)
  + void addBillToBooking(UUID id, Bill bill)
  + List<UUID> getBookingIds()
  + Booking getBooking(UUID id)
}


@enduml